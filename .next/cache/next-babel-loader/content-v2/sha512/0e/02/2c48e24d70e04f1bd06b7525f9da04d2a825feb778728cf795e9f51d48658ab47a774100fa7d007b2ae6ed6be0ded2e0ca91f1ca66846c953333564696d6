{"ast":null,"code":"import mongoose from 'mongoose';\nimport connectToMongo from '../../database/connection';\nimport UserSchema from '../../database/models/UserModel';\nconnectToMongo();\nexport default (async (req, res) => {\n  const {\n    query: {\n      id\n    },\n    method\n  } = req;\n  let User;\n\n  try {\n    User = mongoose.model('User');\n  } catch {\n    User = mongoose.model('User', UserSchema);\n  }\n\n  switch (method) {\n    case 'GET':\n      try {\n        const user = await User.findById(id);\n        res.status(201).json({\n          success: true,\n          data: user\n        });\n      } catch (err) {\n        res.status(400).json({\n          success: false\n        });\n      }\n\n      break;\n\n    case 'DELETE':\n      try {\n        const deletedUser = await User.findByIdAndDelete(id);\n        res.status(201).json({\n          success: true,\n          data: deletedUser\n        });\n      } catch (err) {\n        res.status(400).json({\n          success: false\n        });\n      }\n\n      break;\n  }\n});","map":{"version":3,"sources":["/home/gustavo/Documentos/Github/nextjs-user-list/src/pages/api/[id].tsx"],"names":["mongoose","connectToMongo","UserSchema","req","res","query","id","method","User","model","user","findById","status","json","success","data","err","deletedUser","findByIdAndDelete"],"mappings":"AACA,OAAOA,QAAP,MAAqB,UAArB;AAEA,OAAOC,cAAP,MAA2B,2BAA3B;AACA,OAAOC,UAAP,MAAuB,iCAAvB;AAEAD,cAAc;AAEd,gBAAe,OAAOE,GAAP,EAA4BC,GAA5B,KAAqD;AAEhE,QAAM;AACFC,IAAAA,KAAK,EAAE;AAAEC,MAAAA;AAAF,KADL;AAEFC,IAAAA;AAFE,MAGFJ,GAHJ;AAKA,MAAIK,IAAJ;;AAEA,MAAI;AACAA,IAAAA,IAAI,GAAGR,QAAQ,CAACS,KAAT,CAAe,MAAf,CAAP;AACH,GAFD,CAEE,MAAM;AACJD,IAAAA,IAAI,GAAGR,QAAQ,CAACS,KAAT,CAAe,MAAf,EAAuBP,UAAvB,CAAP;AACH;;AAED,UAAQK,MAAR;AACI,SAAK,KAAL;AACI,UAAI;AACA,cAAMG,IAAI,GAAG,MAAMF,IAAI,CAACG,QAAL,CAAcL,EAAd,CAAnB;AAEAF,QAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,UAAAA,OAAO,EAAE,IAAX;AAAiBC,UAAAA,IAAI,EAAEL;AAAvB,SAArB;AACH,OAJD,CAIE,OAAOM,GAAP,EAAY;AACVZ,QAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,UAAAA,OAAO,EAAE;AAAX,SAArB;AACH;;AACD;;AAEJ,SAAK,QAAL;AACI,UAAI;AACA,cAAMG,WAAW,GAAG,MAAMT,IAAI,CAACU,iBAAL,CAAuBZ,EAAvB,CAA1B;AAEAF,QAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,UAAAA,OAAO,EAAE,IAAX;AAAiBC,UAAAA,IAAI,EAAEE;AAAvB,SAArB;AACH,OAJD,CAIE,OAAOD,GAAP,EAAY;AACVZ,QAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,UAAAA,OAAO,EAAE;AAAX,SAArB;AACH;;AACD;AAnBR;AAqBH,CApCD","sourcesContent":["import { NextApiRequest, NextApiResponse } from 'next';\nimport mongoose from 'mongoose';\n\nimport connectToMongo from '../../database/connection';\nimport UserSchema from '../../database/models/UserModel';\n\nconnectToMongo();\n\nexport default async (req: NextApiRequest, res: NextApiResponse) => {\n\n    const {\n        query: { id },\n        method\n    } = req;\n\n    let User;\n\n    try {\n        User = mongoose.model('User');\n    } catch {\n        User = mongoose.model('User', UserSchema)\n    }\n\n    switch (method) {\n        case 'GET':\n            try {\n                const user = await User.findById(id);\n\n                res.status(201).json({ success: true, data: user });\n            } catch (err) {\n                res.status(400).json({ success: false });\n            }\n            break;\n\n        case 'DELETE':\n            try {\n                const deletedUser = await User.findByIdAndDelete(id);\n\n                res.status(201).json({ success: true, data: deletedUser });\n            } catch (err) {\n                res.status(400).json({ success: false });\n            }\n            break;\n    }\n}\n"]},"metadata":{},"sourceType":"module"}